<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Esports Team Management Simulator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
/* ============================================================
   GLOBAL VARIABLES — PER STEP THEMES
============================================================ */
:root {
  --bg:#070b16;
  --text:#e8eeff;
  --panel:#11172b;
  --line:#1f2a52;
  --accent:#6aa8ff;

  /* Step Theme Colors */
  --color-step1:#4da3ff;    /* Recruitment blue */
  --color-step2:#4dff91;    /* Training green */
  --color-step3:#b570ff;    /* Staff purple */
  --color-step4:#ff9a4d;    /* Roster orange */
  --color-step5:#ffe84d;    /* Simulation yellow */
  --color-step6:#ffddff;    /* Reflection soft white/pink */
}

/* ============================================================
   BASE STYLES
============================================================ */
body {
  margin:0;
  background:radial-gradient(circle at top,#182343,#070b16 70%);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  color:var(--text);
  overflow:hidden; /* Dashboard layout */
}

/* ============================================================
   CINEMATIC BACKGROUND (ALL STEPS)
============================================================ */
.cine-bg {
  position:fixed;
  inset:0;
  overflow:hidden;
  z-index:-1;
  background:radial-gradient(circle at 30% 30%, #1c284f, #070b16 80%);
  animation:bgPulse 12s infinite alternate ease-in-out;
}

@keyframes bgPulse {
  from{transform:scale(1);}
  to{transform:scale(1.04);}
}

.cine-glow {
  position:absolute;
  border-radius:50%;
  filter:blur(80px);
  opacity:.45;
  animation:glowDrift 14s infinite alternate ease-in-out;
}
.cine-glow.one { width:450px;height:450px; background:#6aa8ff; top:10%; left:10%; }
.cine-glow.two { width:350px;height:350px; background:#ba8dff; bottom:15%; right:12%; animation-delay:3s; }
.cine-glow.three { width:300px;height:300px; background:#6dffa0; top:60%; left:50%; animation-delay:6s; }

@keyframes glowDrift {
  from{ transform:translate(-20px,-20px); }
  to{ transform:translate(20px,20px); }
}

/* ============================================================
   LEFT TERMINAL NAVIGATION (AAA GAME CLIENT NAV)
============================================================ */

.nav-container {
  position:fixed;
  top:0;
  bottom:0;
  left:0;
  width:240px;
  backdrop-filter:blur(16px);
  background:rgba(10,14,25,0.75);
  border-right:1px solid var(--line);
  padding-top:20px;
  z-index:50;
}

.nav-title {
  text-align:center;
  font-weight:700;
  margin-bottom:24px;
  font-size:1.2rem;
  color:var(--accent);
  letter-spacing:1px;
}

.nav-list {
  display:flex;
  flex-direction:column;
  gap:10px;
  padding:0 12px;
}

.nav-item {
  padding:12px 16px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,0.08);
  font-family:Consolas, monospace;
  font-size:0.9rem;
  cursor:pointer;
  color:#9bb4ff;
  transition:all .25s ease;
}

.nav-item:hover {
  background:rgba(255,255,255,0.05);
  border-color:var(--accent);
  color:var(--accent);
  transform:translateX(3px);
}

.nav-item.active {
  background:rgba(255,255,255,0.12);
  border-color:var(--accent);
  color:var(--accent);
  transform:translateX(0);
}

/* Codes look sci-fi: [01] RECRUIT */
.nav-code {
  color:var(--accent);
  margin-right:6px;
}

/* ============================================================
   MAIN CONTENT AREA
============================================================ */
.main-area {
  margin-left:240px;
  height:100vh;
  overflow-y:auto;
  padding:20px 26px 80px;
}

/* PANELS with cinematic glass effect */
.panel {
  background:rgba(15,20,35,0.78);
  border:1px solid rgba(255,255,255,0.08);
  border-radius:16px;
  padding:24px;
  backdrop-filter:blur(12px);
  margin-bottom:26px;
  box-shadow:0 0 18px rgba(0,0,0,0.25);
  animation:fadeIn .45s ease, scaleIn .25s ease;
}

@keyframes fadeIn {
  from{opacity:0;}
  to{opacity:1;}
}
@keyframes scaleIn {
  from{transform:scale(.97);}
  to{transform:scale(1);}
}

/* THEMED PANEL HEADERS */
.panel h2 {
  margin-top:0;
  font-size:1.5rem;
  font-family:Consolas, monospace;
  letter-spacing:1px;
}

.step1 h2 { color:var(--color-step1); }
.step2 h2 { color:var(--color-step2); }
.step3 h2 { color:var(--color-step3); }
.step4 h2 { color:var(--color-step4); }
.step5 h2 { color:var(--color-step5); }
.step6 h2 { color:var(--color-step6); }

/* Inputs & buttons */
input, textarea, select {
  background:#0b1020;
  border:1px solid #2b355c;
  color:var(--text);
  border-radius:8px;
  padding:10px;
  width:100%;
}

textarea {
  min-height:80px;
  resize:vertical;
}

button {
  padding:12px 20px;
  background:var(--accent);
  color:#050815;
  border:none;
  border-radius:10px;
  cursor:pointer;
  font-weight:700;
  margin-top:10px;
  transition:all .2s ease;
}
button:hover {
  transform:scale(1.05);
  box-shadow:0 0 12px rgba(106,168,255,0.5);
}

.option-grid {
  display:flex;
  flex-wrap:wrap;
  gap:10px;
}
.option-btn {
  flex:1 1 240px;
  padding:10px 14px;
  border:1px solid rgba(255,255,255,0.08);
  background:#0b1020;
  border-radius:10px;
  cursor:pointer;
  transition:all .25s ease;
  color:#9bb4ff;
  font-size:.9rem;
}
.option-btn:hover {
  border-color:var(--accent);
  color:var(--accent);
}
.option-btn.selected {
  background:rgba(106,168,255,0.15);
  border-color:var(--accent);
  color:var(--accent);
}

/* Player grid */
.player-grid {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(230px,1fr));
  gap:12px;
}
.player-card {
  padding:14px;
  background:#0b1020;
  border:1px solid rgba(255,255,255,0.08);
  border-radius:12px;
  cursor:pointer;
  transition:all .25s ease;
}
.player-card:hover {
  border-color:var(--accent);
  transform:translateY(-2px);
}
.player-card.selected {
  background:rgba(106,168,255,0.18);
  border-color:var(--accent);
}

/* Metric boxes */
.metric {
  background:#0b1020;
  border:1px solid rgba(255,255,255,0.08);
  border-radius:12px;
  padding:14px;
  flex:1 1 160px;
}
.metric h4 {
  margin:0;
  color:var(--muted);
}
.metric span {
  font-size:1.4rem;
  font-weight:700;
}

/* Output blocks */
.output-block {
  background:#0b1020;
  border:1px solid rgba(255,255,255,0.1);
  border-radius:12px;
  padding:16px;
  white-space:pre-wrap;
}

/* Step visibility */
.step {
  display:none;
}
.step.active {
  display:block;
}

</style>
</head>

<body>

<!-- Cinematic Background -->
<div class="cine-bg">
  <div class="cine-glow one"></div>
  <div class="cine-glow two"></div>
  <div class="cine-glow three"></div>
</div>

<!-- LEFT TERMINAL NAV -->
<div class="nav-container">
  <div class="nav-title">COACH DASHBOARD</div>
  <div class="nav-list">
    <div class="nav-item" data-step="1"><span class="nav-code">[01]</span> RECRUIT</div>
    <div class="nav-item" data-step="2"><span class="nav-code">[02]</span> TRAIN</div>
    <div class="nav-item" data-step="3"><span class="nav-code">[03]</span> STAFF</div>
    <div class="nav-item" data-step="4"><span class="nav-code">[04]</span> ROSTER</div>
    <div class="nav-item" data-step="5"><span class="nav-code">[05]</span> SIMULATE</div>
    <div class="nav-item" data-step="6"><span class="nav-code">[06]</span> REFLECT</div>
  </div>
</div>

<!-- MAIN CONTENT -->
<div class="main-area">
<!-- ============================================================
     STEP 1 — RECRUITMENT
============================================================ -->
<div class="step step1 active" data-step="1">
  <div class="panel">
    <h2>Recruitment Strategy</h2>

    <label>Team Name</label>
    <input id="teamName" placeholder="Enter your team name">

    <label>Target Group</label>
    <input id="targetGroup" placeholder="e.g., New players, high-skill DPS, strong communicators">

    <h3 style="color:var(--color-step1);">Recruitment Activities (choose up to 3)</h3>
    <div class="option-grid">
      <div class="option-btn recOpt" data-label="Social media campaign">Social media campaign</div>
      <div class="option-btn recOpt" data-label="In-house tournaments">In-house tournaments</div>
      <div class="option-btn recOpt" data-label="Counselor referrals">Counselor referrals</div>
      <div class="option-btn recOpt" data-label="Open lab nights">Open lab nights</div>
      <div class="option-btn recOpt" data-label="Collaboration with clubs">Collaboration with clubs</div>
      <div class="option-btn recOpt" data-label="Joint tryouts with teams">Joint tryouts with other teams</div>
    </div>

    <label>Extra notes or timeline</label>
    <textarea id="strategiesOther"></textarea>

    <h3 style="color:var(--color-step1);">Incentives (choose up to 3)</h3>
    <div class="option-grid">
      <div class="option-btn incOpt" data-label="Practice jerseys">Practice jerseys</div>
      <div class="option-btn incOpt" data-label="Travel to tournaments">Travel to tournaments</div>
      <div class="option-btn incOpt" data-label="Academic support">Academic support</div>
      <div class="option-btn incOpt" data-label="Leadership opportunities">Leadership opportunities</div>
    </div>

    <label>Extra notes</label>
    <textarea id="incentivesOther"></textarea>

    <button onclick="generatePlan()">Generate Recruitment Plan</button>

    <h3>Generated Plan</h3>
    <div class="output-block" id="recruitmentPlanOut"></div>

    <h3>Recruitment Flyer</h3>
    <div id="flyer" class="output-block"></div>

  </div>
</div>


<!-- ============================================================
     STEP 2 — TRAINING
============================================================ -->
<div class="step step2" data-step="2">
  <div class="panel">
    <h2>Training Framework</h2>

    <label>Preseason Strategy</label>
    <textarea id="preseason"></textarea>

    <label>Season Schedule</label>
    <textarea id="season"></textarea>

    <label>Progress Monitoring</label>
    <textarea id="monitor"></textarea>

    <button onclick="generateTraining()">Generate Training Framework</button>

    <h3>Generated Training Plan</h3>
    <div class="output-block" id="trainingOut"></div>

    <hr><br>

    <h3 style="color:var(--color-step2)">Training Load & Priorities</h3>

    <label>Weekly Training Hours</label>
    <select id="hours">
      <option value="3">3 hours</option>
      <option value="5">5 hours</option>
      <option value="7">7 hours</option>
      <option value="9">9 hours</option>
    </select>

    <label>Preseason Intensity</label>
    <select id="preIntensity">
      <option value="medium">Medium</option>
      <option value="high">High</option>
      <option value="low">Low</option>
    </select>

    <h4>Training Focus</h4>
    <div class="option-grid">
      <label><input type="checkbox" id="tf_mech"> Mechanics training</label>
      <label><input type="checkbox" id="tf_strat"> Strategy & VOD review</label>
      <label><input type="checkbox" id="tf_culture"> Team culture & wellness</label>
    </div>
  </div>
</div>


<!-- ============================================================
     STEP 3 — STAFF
============================================================ -->
<div class="step step3" data-step="3">
  <div class="panel">
    <h2>Staff Roles</h2>

    <p>Select up to <strong>4 staff members</strong>. Each modifies team skill, cohesion, or risk.</p>

    <div class="option-grid">
      <div class="option-btn staffOpt" data-skill="10" data-cohesion="5" data-risk="0">Esports Coach</div>
      <div class="option-btn staffOpt" data-skill="5" data-cohesion="2" data-risk="-3">Wellness Coach</div>
      <div class="option-btn staffOpt" data-skill="8" data-cohesion="0" data-risk="0">Analyst</div>
      <div class="option-btn staffOpt" data-skill="0" data-cohesion="12" data-risk="-5">Life Coach</div>
      <div class="option-btn staffOpt" data-skill="6" data-cohesion="1" data-risk="-2">Nutritionist</div>
      <div class="option-btn staffOpt" data-skill="4" data-cohesion="3" data-risk="-4">Psychologist</div>
      <div class="option-btn staffOpt" data-skill="10" data-cohesion="-2" data-risk="4">Talent Scout</div>
    </div>
  </div>
</div>


<!-- ============================================================
     STEP 4 — ROSTER SELECTION
============================================================ -->
<div class="step step4" data-step="4">
  <div class="panel">
    <h2>Select Your Roster (Max 5 Players)</h2>

    <p>Player pool is generated based on your recruitment + incentive choices.</p>

    <div id="poolSummary" style="margin:10px 0; opacity:0.8;"></div>

    <div class="player-grid" id="playerGrid"></div>

  </div>
</div>


<!-- ============================================================
     STEP 5 — SIMULATION
============================================================ -->
<div class="step step5" data-step="5">
  <div class="panel">
    <h2>Season Simulation</h2>

    <button onclick="runSimulation()">Run Season</button>

    <h3 style="margin-top:20px;">Season Metrics</h3>
    <div style="display:flex; gap:14px; flex-wrap:wrap;">
      <div class="metric"><h4>Skill</h4><span id="m_skill">–</span></div>
      <div class="metric"><h4>Cohesion</h4><span id="m_cohesion">–</span></div>
      <div class="metric"><h4>Risk</h4><span id="m_risk">–</span></div>
    </div>

    <h3>Outcome</h3>
    <div id="outcomeSummary" class="output-block"></div>

  </div>
</div>


<!-- ============================================================
     STEP 6 — REFLECTION
============================================================ -->
<div class="step step6" data-step="6">
  <div class="panel">
    <h2>Final Reflection</h2>

    <label>1. How did your recruitment focus match the players you attracted?</label>
    <textarea id="ref1"></textarea>

    <label>2. How did training and staff decisions influence the results?</label>
    <textarea id="ref2"></textarea>

    <label>3. What would you change for next season?</label>
    <textarea id="ref3"></textarea>

    <label>4. How does this relate to real esports coaching?</label>
    <textarea id="ref4"></textarea>

    <button onclick="generateReflection()">Generate Reflection</button>

    <h3>Your Reflection</h3>
    <div class="output-block" id="reflectionOut"></div>
  </div>
</div>

</div> <!-- END MAIN AREA -->


<!-- ============================================================
     JAVASCRIPT — FULL LOGIC
============================================================ -->
<script>
/* Smooth scrolling and nav handling */
const steps = document.querySelectorAll('.step');
const navItems = document.querySelectorAll('.nav-item');

navItems.forEach(item=>{
  item.addEventListener('click',()=>{
    const step = item.dataset.step;

    navItems.forEach(n=>n.classList.remove('active'));
    item.classList.add('active');

    steps.forEach(s=>s.classList.remove('active'));
    document.querySelector('.step'+step).classList.add('active');

    document.querySelector('.main-area').scrollTo({ top:0, behavior:'smooth' });

    if(step == "4"){
      buildAvailablePlayerPool();
      renderPlayerGrid();
      summarizePool();
    }
  });
});


/* Utility: update selection counts */
function updateCounts(){}


/* ============================================================
   PLAYER POOL GENERATION
============================================================ */
const playerPool = [
  {
    id:1, name:"Apex", role:"Flex",
    mech:92, iq:78, comm:70, team:65, commit:80, toxic:30,
    background:"Former console grinder turned PC competitor.",
    motivation:"Wants to prove they're elite without formal coaching.",
    personality:"Confident, fearless.",
    preferences:"Fast-paced comps, aggressive flanks."
  },
  {
    id:2, name:"Shadow", role:"DPS",
    mech:95, iq:72, comm:55, team:52, commit:70, toxic:60,
    background:"Ranked-only superstar.",
    motivation:"Wants highlights and personal brand growth.",
    personality:"Flashy, ego-driven.",
    preferences:"Assassin/duelist heroes, high-risk plays."
  },
  {
    id:3, name:"FrostByte", role:"Tank",
    mech:75, iq:88, comm:82, team:90, commit:85, toxic:12,
    background:"Captain of wrestling team.",
    motivation:"Wants structure and teamwork.",
    personality:"Calm, composed.",
    preferences:"Shield tanks, objective-based play."
  },
  {
    id:4, name:"Nova", role:"Support",
    mech:68, iq:85, comm:88, team:92, commit:95, toxic:5,
    background:"Peer mentor & helper personality.",
    motivation:"Wants to support teammates and grow culture.",
    personality:"Empathetic, patient.",
    preferences:"Healing/backline supports."
  },
  {
    id:5, name:"Blitz", role:"DPS",
    mech:89, iq:70, comm:58, team:55, commit:82, toxic:40,
    background:"Track runner with insane reaction time.",
    motivation:"Craves high-stakes LAN matches.",
    personality:"Energetic, eager.",
    preferences:"Entry fraggers, mobility heroes."
  },
  {
    id:6, name:"Circuit", role:"Flex",
    mech:78, iq:80, comm:84, team:76, commit:87, toxic:15,
    background:"STEM club analyst.",
    motivation:"Loves analytics and patch development.",
    personality:"Curious, thoughtful.",
    preferences:"Utility, adaptive roles."
  },
  {
    id:7, name:"Harpy", role:"Support",
    mech:70, iq:83, comm:85, team:88, commit:60, toxic:25,
    background:"School ambassador, strong people skills.",
    motivation:"Wants community and social connection.",
    personality:"Warm, extroverted.",
    preferences:"Vision control supports."
  },
  {
    id:8, name:"Crank", role:"Tank",
    mech:65, iq:67, comm:50, team:52, commit:55, toxic:70,
    background:"Solo queue warrior.",
    motivation:"Wants validation.",
    personality:"Volatile, emotional.",
    preferences:"Dive tanks, chaos-based play."
  },
  {
    id:9, name:"Spectre", role:"DPS",
    mech:90, iq:90, comm:72, team:60, commit:75, toxic:20,
    background:"Chess competitor.",
    motivation:"Wants mental challenge at high speed.",
    personality:"Quiet, analytical.",
    preferences:"Snipers, precise burst heroes."
  },
  {
    id:10, name:"Atlas", role:"Tank",
    mech:82, iq:88, comm:79, team:85, commit:90, toxic:10,
    background:"Football lineman.",
    motivation:"Wants leadership role.",
    personality:"Protective, steady.",
    preferences:"Peel tanks, protect-the-carry comps."
  },

  /* ---------------- NEW PLAYERS FOR EXPANDED POOL ---------------- */

  {
    id:11, name:"Pixel", role:"Support",
    mech:74, iq:92, comm:90, team:88, commit:77, toxic:5,
    background:"Robotics club strategist.",
    motivation:"Wants to help coordinate macro play.",
    personality:"Organized, precise.",
    preferences:"Cooldown-reliant supports, utility-heavy roles."
  },
  {
    id:12, name:"Raze", role:"DPS",
    mech:96, iq:75, comm:60, team:58, commit:68, toxic:45,
    background:"Streamer with small following.",
    motivation:"Wants exposure.",
    personality:"Showy, unpredictable.",
    preferences:"Explosive DPS with AoE burst."
  },
  {
    id:13, name:"Kelso", role:"Tank",
    mech:67, iq:70, comm:65, team:62, commit:72, toxic:35,
    background:"New to esports but hyper-dedicated.",
    motivation:"Wants to improve rapidly.",
    personality:"Determined, hard-working.",
    preferences:"Simple, sturdy tank heroes."
  },
  {
    id:14, name:"Vexa", role:"Flex",
    mech:80, iq:83, comm:77, team:79, commit:92, toxic:8,
    background:"Debate team standout.",
    motivation:"Wants structured improvement and tactical play.",
    personality:"Persuasive, composed.",
    preferences:"Flexible off-meta picks."
  },
  {
    id:15, name:"Jolt", role:"DPS",
    mech:94, iq:74, comm:68, team:67, commit:60, toxic:55,
    background:"Arcade machine prodigy.",
    motivation:"Loves fast-paced combat.",
    personality:"Hyperactive, chaotic neutral.",
    preferences:"Rushdown DPS heroes."
  },
  {
    id:16, name:"Rune", role:"Support",
    mech:65, iq:89, comm:90, team:90, commit:95, toxic:3,
    background:"Volunteers in tutoring center.",
    motivation:"Wants to help others succeed.",
    personality:"Calm, selfless.",
    preferences:"Healing over DPS supports."
  },
  {
    id:17, name:"Grim", role:"DPS",
    mech:91, iq:85, comm:58, team:50, commit:74, toxic:50,
    background:"Online tournament grinder.",
    motivation:"Wants recognition.",
    personality:"Brooding, intense.",
    preferences:"High-precision DPS."
  },
    {
    id:18, name:"Piper", role:"Flex",
    mech:76, iq:82, comm:84, team:85, commit:86, toxic:12,
    background:"Band percussionist with rhythm mastery.",
    motivation:"Wants team communication synergy.",
    personality:"Friendly, rhythmic thinker.",
    preferences:"Combo-based heroes requiring timing."
  },
  {
    id:19, name:"Tempo", role:"Support",
    mech:72, iq:91, comm:95, team:93, commit:84, toxic:6,
    background:"Choir section leader.",
    motivation:"Wants to harmonize team communication.",
    personality:"Musical, empathetic.",
    preferences:"Tempo-control supports."
  },
  {
    id:20, name:"Knox", role:"Tank",
    mech:79, iq:76, comm:60, team:68, commit:77, toxic:20,
    background:"Powerlifting enthusiast.",
    motivation:"Wants to be the frontline hero.",
    personality:"Tough, straightforward.",
    preferences:"Bruiser tanks."
  },

  {
    id:21, name:"Lyric", role:"DPS",
    mech:88, iq:82, comm:70, team:64, commit:78, toxic:18,
    background:"Digital art student.",
    motivation:"Wants creative expression in gameplay.",
    personality:"Artistic, introspective.",
    preferences:"Stylish DPS with mobility."
  },
  {
    id:22, name:"Striker", role:"DPS",
    mech:97, iq:71, comm:52, team:55, commit:65, toxic:62,
    background:"Aim-lab grinder.",
    motivation:"Wants to prove aim > strategy.",
    personality:"Cocky, lone-wolf.",
    preferences:"One-shot heroes."
  },
  {
    id:23, name:"Patch", role:"Support",
    mech:60, iq:87, comm:92, team:95, commit:90, toxic:2,
    background:"Coding club helper.",
    motivation:"Wants to enable optimal play.",
    personality:"Helpful, gentle.",
    preferences:"Buff/debuff utility supports."
  },
  {
    id:24, name:"Forge", role:"Tank",
    mech:82, iq:82, comm:78, team:80, commit:88, toxic:15,
    background:"Construction program student.",
    motivation:"Wants to build structure for his team.",
    personality:"Solid, dependable.",
    preferences:"Heavy tanks that anchor fights."
  },
  {
    id:25, name:"Mira", role:"Flex",
    mech:77, iq:84, comm:79, team:81, commit:92, toxic:6,
    background:"Dance choreographer.",
    motivation:"Loves synchronized team movement.",
    personality:"Expressive, disciplined.",
    preferences:"Heroes requiring rhythm & timing."
  },

  {
    id:26, name:"Gadget", role:"Support",
    mech:58, iq:93, comm:89, team:87, commit:91, toxic:4,
    background:"Future engineer.",
    motivation:"Wants to optimize team systems.",
    personality:"Inventive, detail-oriented.",
    preferences:"Tech-heavy supports."
  },
  {
    id:27, name:"Rift", role:"DPS",
    mech:93, iq:88, comm:65, team:55, commit:73, toxic:38,
    background:"VR competitive player.",
    motivation:"Wants cross-platform mastery.",
    personality:"Experimental, boundary-pushing.",
    preferences:"High-mobility DPS heroes."
  },
  {
    id:28, name:"Koda", role:"Tank",
    mech:81, iq:79, comm:80, team:82, commit:84, toxic:10,
    background:"Former hockey goalie.",
    motivation:"Wants to protect his teammates.",
    personality:"Stoic, protective.",
    preferences:"Damage mitigation tanks."
  },
  {
    id:29, name:"Bitsy", role:"Flex",
    mech:74, iq:90, comm:85, team:89, commit:88, toxic:7,
    background:"Chess + robotics dual competitor.",
    motivation:"Wants strategic, adaptable play.",
    personality:"Clever, cooperative.",
    preferences:"Off-meta synergies."
  },
  {
    id:30, name:"Rumble", role:"DPS",
    mech:90, iq:77, comm:63, team:60, commit:72, toxic:50,
    background:"Skate park daredevil.",
    motivation:"Wants adrenaline and crowd hype.",
    personality:"Wild, competitive.",
    preferences:"Explosive DPS with risky engages."
  }
];


let availablePlayerPool = [];


/* Recruitment logic */
function buildAvailablePlayerPool(){
  const rec = [...document.querySelectorAll(".recOpt.selected")].map(b=>b.dataset.label);
  const inc = [...document.querySelectorAll(".incOpt.selected")].map(b=>b.dataset.label);

  availablePlayerPool = [];

  playerPool.forEach(p=>{
    let interest = 50;

    // Recruitment effects
    rec.forEach(r=>{
      if(r.includes("Social")) interest += (p.mech - 75)/5;
      if(r.includes("In-house")) interest += (p.commit - 70)/5;
      if(r.includes("Counselor")) interest += (p.commit - 75)/6 - (p.toxic - 20)/6;
      if(r.includes("Open lab")) interest += (p.team - 70)/5;
      if(r.includes("Collaboration")) interest += (p.comm - 75)/5;
      if(r.includes("Joint")) interest += (p.iq - 75)/5;
    });

    // Incentives
    inc.forEach(i=>{
      if(i.includes("Academic")) interest += (p.commit - 75)/5 - (p.toxic - 20)/5;
      if(i.includes("Travel")) interest += (p.mech - 80)/5;
      if(i.includes("Leadership")) interest += (p.comm - 75)/4;
    });

    p._interest = interest + (Math.random()*6 - 3);
  });

  const sorted = [...playerPool].sort((a,b)=>b._interest - a._interest);
  availablePlayerPool = sorted.slice(0,8);
}


/* Player grid */
function renderPlayerGrid(){
  const grid = document.getElementById("playerGrid");
  grid.innerHTML="";

  availablePlayerPool.forEach(p=>{
    const div = document.createElement("div");
    div.className="player-card";
    div.dataset.id=p.id;

div.innerHTML = `
  <strong>${p.name}</strong><br>
  <em>${p.role}</em><br><br>
  <strong>Background:</strong> ${p.background}<br>
  <strong>Motivation:</strong> ${p.motivation}<br><br>
  <strong>Stats:</strong><br>
  Mech ${p.mech} | IQ ${p.iq}<br>
  Comm ${p.comm} | Team ${p.team}<br>
  Commit ${p.commit} | Toxic ${p.toxic}
`;

    div.onclick = ()=>{
      const selected = document.querySelectorAll(".player-card.selected").length;
      if(!div.classList.contains("selected") && selected>=5) return;
      div.classList.toggle("selected");
    };

    grid.appendChild(div);
  });
}


/* Pool summary */
function summarizePool(){
  const pool = availablePlayerPool;
  const avg = v=>Math.round(pool.reduce((a,b)=>a+b[v],0)/pool.length);
  document.getElementById("poolSummary").innerHTML =
    `AVG → Mech ${avg("mech")}, IQ ${avg("iq")}, Comm ${avg("comm")}, Toxic ${avg("toxic")}`;
}


/* ============================================================
   GENERATE PLAN & TRAINING
============================================================ */
function generatePlan(){
  const name = document.getElementById("teamName").value;
  const target = document.getElementById("targetGroup").value;

  const rec = [...document.querySelectorAll(".recOpt.selected")].map(x=>x.dataset.label);
  const inc = [...document.querySelectorAll(".incOpt.selected")].map(x=>x.dataset.label);

  const plan =
`ESPORTS RECRUITMENT PLAN
Team: ${name}

Target: ${target}

Recruitment:
- ${rec.join("\n- ")}

Incentives:
- ${inc.join("\n- ")}

Timeline:
Week 1 — Campaign
Week 2 — Meeting
Week 3 — Tryouts
Week 4 — Final roster
`;

  document.getElementById("recruitmentPlanOut").textContent = plan;

  document.getElementById("flyer").innerHTML =
    `<h2>${name} — Now Recruiting!</h2>
     <p><strong>Who We're Looking For:</strong> ${target}</p>
     <p><strong>Why Join:</strong> ${inc.join(", ")}</p>
     <p><strong>Apply:</strong> Attend tryouts or complete interest form</p>`;
}


function generateTraining(){
  const p=document.getElementById("preseason").value;
  const s=document.getElementById("season").value;
  const m=document.getElementById("monitor").value;

  document.getElementById("trainingOut").textContent =
`TRAINING FRAMEWORK

Preseason:
${p}

Season:
${s}

Monitoring:
${m}`;
}


/* ============================================================
   SIMULATION
============================================================ */
function runSimulation(){
  const roster = [...document.querySelectorAll(".player-card.selected")]
                 .map(div => availablePlayerPool.find(p=>p.id==div.dataset.id));

  if(roster.length!==5){
    alert("Select exactly 5 players.");
    return;
  }

  let skill=0, coh=0, risk=0;

  roster.forEach(p=>{
    skill += p.mech + p.iq;
    coh += p.comm + p.team;
  });
/* -------------------------------------------------------------
   NEW RISK FORMULA — REALISTIC ESPORTS WELLNESS MODEL
------------------------------------------------------------- */

// BASE RISK from players
risk = 0;

roster.forEach(p => {
  // Toxicity: heaviest weight
  risk += p.toxic * 1.4;

  // Low commitment: medium weight
  risk += (100 - p.commit) * 0.4;

  // Personality instability
  if (p.personality.includes("chaotic") ||
      p.personality.includes("volatile") ||
      p.personality.includes("ego") ||
      p.personality.includes("emotional")) {
    risk += 15;
  }

  // Positive psychological profiles reduce risk
  if (p.personality.includes("calm") ||
      p.personality.includes("selfless") ||
      p.personality.includes("protective") ||
      p.personality.includes("supportive") ||
      p.personality.includes("empathetic")) {
    risk -= 10;
  }
});

/* -------------------------------------------------------------
   TRAINING-RELATED RISK
------------------------------------------------------------- */
const hours = parseInt(document.getElementById("hours").value);

if (hours >= 9) risk += 20;
if (hours >= 7 && hours < 9) risk += 10;
if (hours <= 3) risk += 5;

const intensity = document.getElementById("preIntensity").value;

if (intensity === "high") risk += 15;
if (intensity === "low") risk -= 7;

if (document.getElementById("tf_culture").checked) risk -= 12;

/* -------------------------------------------------------------
   STAFF EFFECTS
------------------------------------------------------------- */
document.querySelectorAll(".staffOpt.selected").forEach(btn => {
  const staffName = btn.textContent.toLowerCase();

  if (staffName.includes("psychologist")) risk -= 18;
  if (staffName.includes("wellness")) risk -= 12;
  if (staffName.includes("nutritionist")) risk -= 6;
  if (staffName.includes("life coach")) risk -= 15;

  if (staffName.includes("talent scout")) risk += 8;
});

/* -------------------------------------------------------------
   ROLE BALANCE RISK
------------------------------------------------------------- */
let roles = roster.map(p => p.role);
let dps = roles.filter(r => r === "DPS").length;
let tank = roles.filter(r => r === "Tank").length;
let supp = roles.filter(r => r === "Support").length;

if (supp === 0) risk += 40;
if (dps >= 3) risk += 15;
if (tank >= 3) risk += 10;

/* -------------------------------------------------------------
   FINAL NORMALIZATION
------------------------------------------------------------- */
risk = Math.round(risk * 0.9); // soften
risk = Math.max(0, risk); // clamp

document.getElementById("m_risk").textContent = risk;


/* ============================================================
   REFLECTION
============================================================ */
function generateReflection(){
  const r1=document.getElementById("ref1").value;
  const r2=document.getElementById("ref2").value;
  const r3=document.getElementById("ref3").value;
  const r4=document.getElementById("ref4").value;

  document.getElementById("reflectionOut").textContent =
`SEASON REFLECTION

1. Recruitment Alignment:
${r1}

2. Training & Staff Impact:
${r2}

3. Next Season Adjustments:
${r3}

4. Connection to Real Coaching:
${r4}`;
}
</script>

</body>
</html>
